((n,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.d3=n.d3||{})})(this,function(_){function x(n,t){return n<t?-1:t<n?1:t<=n?0:NaN}var b,I;1===(b=x).length&&(I=b,b=function(n,t){return x(I(n),t)});function T(n){for(var t,r,i,e=n.length,o=-1,u=0;++o<e;)u+=n[o].length;for(r=new Array(u);0<=--e;)for(t=(i=n[e]).length;0<=--t;)r[--u]=i[t];return r}function H(n,t){var r,i=0,e=n.length,o=-1;if(null==t)for(;++o<e;)(r=+n[o])&&(i+=r);else for(;++o<e;)(r=+t(n[o],o,n))&&(i+=r);return i}function n(){return new t}function t(){this.reset()}t.prototype={constructor:t,reset:function(){this.s=this.t=0},add:function(n){Z(r,n,this.t),Z(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new t;function Z(n,t,r){var i=n.s=t+r,e=i-t;n.t=t-(i-e)+(r-e)}var A=1e-6,w=Math.PI,v=w/2,B=w/4,q=2*w,F=180/w,O=w/180,z=Math.abs,D=Math.atan,C=Math.atan2,P=Math.cos,j=Math.sin,J=Math.sign||function(n){return 0<n?1:n<0?-1:0},L=Math.sqrt;function R(n){return 1<n?v:n<-1?-v:Math.asin(n)}function i(){}function o(n,t){n&&Q.hasOwnProperty(n.type)&&Q[n.type](n,t)}var K={Feature:function(n,t){o(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)o(r[i].geometry,t)}},Q={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){U(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)U(r[i],t,0)},Polygon:function(n,t){V(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)V(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)o(r[i],t)}};function U(n,t,r){var i,e=-1,o=n.length-r;for(t.lineStart();++e<o;)i=n[e],t.point(i[0],i[1],i[2]);t.lineEnd()}function V(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)U(n[r],t,1);t.polygonEnd()}function a(n,t){n&&K.hasOwnProperty(n.type)?K[n.type](n,t):o(n,t)}n(),n();function W(n){return[C(n[1],n[0]),R(n[2])]}function G(n){var t=n[0],n=n[1],r=P(n);return[r*P(t),r*j(t),j(n)]}function S(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function k(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function X(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function E(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Y(n){var t=L(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}n();function $(r,i){function n(n,t){return n=r(n,t),i(n[0],n[1])}return r.invert&&i.invert&&(n.invert=function(n,t){return(n=i.invert(n,t))&&r.invert(n[0],n[1])}),n}function nn(n,t){return[w<n?n-q:n<-w?n+q:n,t]}function tn(r){return function(n,t){return[w<(n+=r)?n-q:n<-w?n+q:n,t]}}function rn(n){var t=tn(n);return t.invert=tn(-n),t}function en(n,t){var e=P(n),o=j(n),u=P(t),a=j(t);function r(n,t){var r=P(t),i=P(n)*r,n=j(n)*r,r=j(t),t=r*e+i*o;return[C(n*u-t*a,i*e-r*o),R(t*u+n*a)]}return r.invert=function(n,t){var r=P(t),i=P(n)*r,n=j(n)*r,r=j(t),t=r*u-n*a;return[C(n*u+r*a,i*e+t*o),R(t*e-i*o)]},r}function on(n,t){(t=G(t))[0]-=n,Y(t);n=1<(n=-t[1])?0:n<-1?w:Math.acos(n);return((-t[2]<0?-n:n)+q-A)%q}function un(){var r,t=[];return{point:function(n,t){r.push([n,t])},lineStart:function(){t.push(r=[])},lineEnd:i,rejoin:function(){1<t.length&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],r=null,n}}}function an(n,t){return z(n[0]-t[0])<A&&z(n[1]-t[1])<A}function ln(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function fn(n,t,r,i,o){var u,e,a=[],l=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,r,i=n[0],e=n[t];if(an(i,e)){for(o.lineStart(),u=0;u<t;++u)o.point((i=n[u])[0],i[1]);o.lineEnd()}else a.push(r=new ln(i,n,null,!0)),l.push(r.o=new ln(i,null,r,!1)),a.push(r=new ln(e,n,null,!1)),l.push(r.o=new ln(e,null,r,!0))}}),a.length){for(l.sort(t),cn(a),cn(l),u=0,e=l.length;u<e;++u)l[u].e=r=!r;for(var f,c,s=a[0];;){for(var p=s,h=!0;p.v;)if((p=p.n)===s)return;f=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(u=0,e=f.length;u<e;++u)o.point((c=f[u])[0],c[1]);else i(p.x,p.n.x,1,o);p=p.n}else{if(h)for(f=p.p.z,u=f.length-1;0<=u;--u)o.point((c=f[u])[0],c[1]);else i(p.x,p.p.x,-1,o);p=p.p}}while(f=(p=p.o).z,h=!h,!p.v);o.lineEnd()}}}function cn(n){if(t=n.length){for(var t,r,i=0,e=n[0];++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}nn.invert=nn;var N=1e9,sn=-N;function pn(y,m,S,E){function M(n,t){return y<=n&&n<=S&&m<=t&&t<=E}function _(n,t,r,i){var e=0,o=0;if(null==n||(e=u(n,r))!==(o=u(t,r))||a(n,t)<0^0<r)for(;i.point(0===e||3===e?y:S,1<e?E:m),(e=(e+r+4)%4)!==o;);else i.point(t[0],t[1])}function u(n,t){return z(n[0]-y)<A?0<t?0:3:z(n[0]-S)<A?0<t?2:1:z(n[1]-m)<A?0<t?1:0:0<t?3:2}function x(n,t){return a(n.x,t.x)}function a(n,t){var r=u(n,1),i=u(t,1);return r!==i?r-i:0===r?t[1]-n[1]:1===r?n[0]-t[0]:2===r?n[1]-t[1]:t[0]-n[0]}return function(i){var e,s,o,u,a,l,f,c,p,h,v,g=i,n=un(),t={point:r,lineStart:function(){t.point=d,s&&s.push(o=[]);h=!0,p=!1,f=c=NaN},lineEnd:function(){e&&(d(u,a),l&&p&&n.rejoin(),e.push(n.result()));t.point=r,p&&g.lineEnd()},polygonStart:function(){g=n,e=[],s=[],v=!0},polygonEnd:function(){var n=(()=>{for(var n=0,t=0,r=s.length;t<r;++t)for(var i,e,o=s[t],u=1,a=o.length,l=o[0],f=l[0],c=l[1];u<a;++u)i=f,e=c,l=o[u],f=l[0],c=l[1],e<=E?E<c&&(c-e)*(y-i)<(f-i)*(E-e)&&++n:c<=E&&(f-i)*(E-e)<(c-e)*(y-i)&&--n;return n})(),t=v&&n,r=(e=T(e)).length;(t||r)&&(i.polygonStart(),t&&(i.lineStart(),_(null,null,1,i),i.lineEnd()),r&&fn(e,x,n,_,i),i.polygonEnd());g=i,e=s=o=null}};function r(n,t){M(n,t)&&g.point(n,t)}function d(n,t){var r,i,e=M(n,t);s&&o.push([n,t]),h?(u=n,a=t,h=!1,(l=e)&&(g.lineStart(),g.point(n,t))):e&&p?g.point(n,t):((n,t,r,i,e,o)=>{var u=n[0],a=n[1],l=0,f=1,c=t[0]-u,s=t[1]-a,r=r-u;if(c||!(0<r)){if(r/=c,c<0){if(r<l)return;r<f&&(f=r)}else if(0<c){if(f<r)return;l<r&&(l=r)}if(r=e-u,c||!(r<0)){if(r/=c,c<0){if(f<r)return;l<r&&(l=r)}else if(0<c){if(r<l)return;r<f&&(f=r)}if(r=i-a,s||!(0<r)){if(r/=s,s<0){if(r<l)return;r<f&&(f=r)}else if(0<s){if(f<r)return;l<r&&(l=r)}if(r=o-a,s||!(r<0)){if(r/=s,s<0){if(f<r)return;l<r&&(l=r)}else if(0<s){if(r<l)return;r<f&&(f=r)}return 0<l&&(n[0]=u+l*c,n[1]=a+l*s),f<1&&(t[0]=u+f*c,t[1]=a+f*s),1}}}}})(r=[f=Math.max(sn,Math.min(N,f)),c=Math.max(sn,Math.min(N,c))],i=[n=Math.max(sn,Math.min(N,n)),t=Math.max(sn,Math.min(N,t))],y,m,S,E)?(p||(g.lineStart(),g.point(r[0],r[1])),g.point(i[0],i[1]),e||g.lineEnd(),v=!1):e&&(g.lineStart(),g.point(n,t),v=!1),f=n,c=t,p=e}return t}}var hn=n();n();function vn(n){return n}var gn,dn,yn,mn,Sn=n(),En=n(),l={point:i,lineStart:i,lineEnd:i,polygonStart:function(){l.lineStart=Mn,l.lineEnd=Nn},polygonEnd:function(){l.lineStart=l.lineEnd=l.point=i,Sn.add(z(En)),En.reset()},result:function(){var n=Sn/2;return Sn.reset(),n}};function Mn(){l.point=_n}function _n(n,t){l.point=xn,gn=yn=n,dn=mn=t}function xn(n,t){En.add(mn*n-yn*t),yn=n,mn=t}function Nn(){xn(gn,dn)}var e=1/0,bn=e,u=-e,wn=u,Pn={point:function(n,t){n<e&&(e=n);u<n&&(u=n);t<bn&&(bn=t);wn<t&&(wn=t)},lineStart:i,lineEnd:i,polygonStart:i,polygonEnd:i,result:function(){var n=[[e,bn],[u,wn]];return u=wn=-(bn=e=1/0),n}};var jn,kn,f,c,An=0,qn=0,s=0,Fn=0,On=0,p=0,zn=0,Cn=0,h=0,g={point:d,lineStart:Ln,lineEnd:In,polygonStart:function(){g.lineStart=Tn,g.lineEnd=Zn},polygonEnd:function(){g.point=d,g.lineStart=Ln,g.lineEnd=In},result:function(){var n=h?[zn/h,Cn/h]:p?[Fn/p,On/p]:s?[An/s,qn/s]:[NaN,NaN];return An=qn=s=Fn=On=p=zn=Cn=h=0,n}};function d(n,t){An+=n,qn+=t,++s}function Ln(){g.point=Rn}function Rn(n,t){g.point=Gn,d(f=n,c=t)}function Gn(n,t){var r=n-f,i=t-c,r=L(r*r+i*i);Fn+=r*(f+n)/2,On+=r*(c+t)/2,p+=r,d(f=n,c=t)}function In(){g.point=d}function Tn(){g.point=Bn}function Zn(){Dn(jn,kn)}function Bn(n,t){g.point=Dn,d(jn=f=n,kn=c=t)}function Dn(n,t){var r=n-f,i=t-c,r=L(r*r+i*i);Fn+=r*(f+n)/2,On+=r*(c+t)/2,p+=r,zn+=(r=c*n-f*t)*(f+n),Cn+=r*(c+t),h+=3*r,d(f=n,c=t)}function Hn(n){this._context=n}Hn.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,q)}},result:i};var Jn,Kn,Qn,y,m,Un=n(),M={point:i,lineStart:function(){M.point=Vn},lineEnd:function(){Jn&&Wn(Kn,Qn),M.point=i},polygonStart:function(){Jn=!0},polygonEnd:function(){Jn=null},result:function(){var n=+Un;return Un.reset(),n}};function Vn(n,t){M.point=Wn,Kn=y=n,Qn=m=t}function Wn(n,t){y-=n,m-=t,Un.add(L(y*y+m*m)),y=n,m=t}function Xn(){this._string=[]}function Yn(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function $n(t,r){var i,e,o=4.5;function u(n){return n&&("function"==typeof o&&e.pointRadius(+o.apply(this,arguments)),a(n,i(e))),e.result()}return u.area=function(n){return a(n,i(l)),l.result()},u.measure=function(n){return a(n,i(M)),M.result()},u.bounds=function(n){return a(n,i(Pn)),Pn.result()},u.centroid=function(n){return a(n,i(g)),g.result()},u.projection=function(n){return arguments.length?(i=null==n?(t=null,vn):(t=n).stream,u):t},u.context=function(n){return arguments.length?(e=null==n?(r=null,new Xn):new Hn(r=n),"function"!=typeof o&&e.pointRadius(o),u):r},u.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(e.pointRadius(+n),+n),u):o},u.projection(t).context(r)}function nt(m,S,E,M){return function(i,a){var l,f,c,r=S(a),t=i.invert(M[0],M[1]),s=un(),p=S(s),h=!1,e={point:o,lineStart:u,lineEnd:v,polygonStart:function(){e.point=g,e.lineStart=d,e.lineEnd=y,f=[],l=[]},polygonEnd:function(){e.point=o,e.lineStart=u,e.lineEnd=v,f=T(f);var n=((n,t)=>{var r=t[0],i=t[1],e=[j(r),-P(r),0],o=0,u=0;hn.reset();for(var a=0,l=n.length;a<l;++a)if(c=(f=n[a]).length)for(var f,c,s=f[c-1],p=s[0],h=s[1]/2+B,v=j(h),g=P(h),d=0;d<c;++d,p=m,v=E,g=S,s=y){var y=f[d],m=y[0],S=y[1]/2+B,E=j(S),S=P(S),M=m-p,_=0<=M?1:-1,x=_*M,N=w<x,b=v*E;hn.add(C(b*_*j(x),g*S+b*P(x))),o+=N?M+_*q:M,N^r<=p^r<=m&&(Y(b=k(G(s),G(y))),Y(x=k(e,b)),(_=(N^0<=M?-1:1)*R(x[2]))<i||i===_&&(b[0]||b[1]))&&(u+=N^0<=M?1:-1)}return(o<-A||o<A&&hn<-A)^1&u})(l,t);f.length?(h||(a.polygonStart(),h=!0),fn(f,rt,n,E,a)):n&&(h||(a.polygonStart(),h=!0),a.lineStart(),E(null,null,1,a),a.lineEnd()),h&&(a.polygonEnd(),h=!1),f=l=null},sphere:function(){a.polygonStart(),a.lineStart(),E(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function o(n,t){var r=i(n,t);m(n=r[0],t=r[1])&&a.point(n,t)}function n(n,t){n=i(n,t);r.point(n[0],n[1])}function u(){e.point=n,r.lineStart()}function v(){e.point=o,r.lineEnd()}function g(n,t){c.push([n,t]);n=i(n,t);p.point(n[0],n[1])}function d(){p.lineStart(),c=[]}function y(){g(c[0][0],c[0][1]),p.lineEnd();var n,t,r,i,e=p.clean(),o=s.result(),u=o.length;if(c.pop(),l.push(c),c=null,u)if(1&e){if(0<(t=(r=o[0]).length-1)){for(h||(a.polygonStart(),h=!0),a.lineStart(),n=0;n<t;++n)a.point((i=r[n])[0],i[1]);a.lineEnd()}}else 1<u&&2&e&&o.push(o.pop().concat(o.shift())),f.push(o.filter(tt))}return e}}function tt(n){return 1<n.length}function rt(n,t){return((n=n.x)[0]<0?n[1]-v-A:v-n[1])-((t=t.x)[0]<0?t[1]-v-A:v-t[1])}Xn.prototype={_circle:Yn(4.5),pointRadius:function(n){return this._circle=Yn(n),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._string.push("M",n,",",t),this._point=1;break;case 1:this._string.push("L",n,",",t);break;default:this._string.push("M",n,",",t,this._circle)}},result:function(){var n;if(this._string.length)return n=this._string.join(""),this._string=[],n}};var it=nt(function(){return 1},function(f){var c,s=NaN,p=NaN,h=NaN;return{lineStart:function(){f.lineStart(),c=1},point:function(n,t){var r,i,e,o,u,a=0<n?w:-w,l=z(n-s);z(l-w)<A?(f.point(s,p=0<(p+t)/2?v:-v),f.point(h,p),f.lineEnd(),f.lineStart(),f.point(a,p),f.point(n,p),c=0):h!==a&&w<=l&&(z(s-h)<A&&(s-=h*A),z(n-a)<A&&(n-=a*A),l=p,e=t,u=j((r=s)-(i=n)),p=z(u)>A?D((j(l)*(o=P(e))*j(i)-j(e)*(i=P(l))*j(r))/(i*o*u)):(l+e)/2,f.point(h,p),f.lineEnd(),f.lineStart(),f.point(a,p),c=0),f.point(s=n,p=t),h=a},lineEnd:function(){f.lineEnd(),s=p=NaN},clean:function(){return 2-c}}},function(n,t,r,i){var e;null==n?(e=r*v,i.point(-w,e),i.point(0,e),i.point(w,e),i.point(w,0),i.point(w,-e),i.point(0,-e),i.point(-w,-e),i.point(-w,0),i.point(-w,e)):z(n[0]-t[0])>A?(n=n[0]<t[0]?w:-w,e=r*n/2,i.point(-n,e),i.point(0,e),i.point(n,e)):i.point(t[0],t[1])},[-w,-v]);function et(h,v){var g=P(h),s=0<g,p=z(g)>A;function d(n,t){return P(n)*P(t)>g}function y(n,t,r){var i,e,o,u,a,l,f,c=[1,0,0],s=k(G(n),G(t)),p=S(s,s),h=s[0],v=p-h*h;return v?(i=k(c,s),X(c=E(c,g*p/v),E(s,-g*h/v)),(v=(s=S(c,p=i))*s-(h=S(p,p))*(S(c,c)-1))<0?void 0:(X(v=E(p,(-s-(i=L(v)))/h),c),v=W(v),r?(e=n[0],o=t[0],u=n[1],t=t[1],o<e&&(f=e,e=o,o=f),!(l=z((a=o-e)-w)<A)&&t<u&&(f=u,u=t,t=f),(l||a<A?l?0<u+t^v[1]<(z(v[0]-e)<A?u:t):u<=v[1]&&v[1]<=t:w<a^(e<=v[0]&&v[0]<=o))?(X(f=E(p,(-s+i)/h),c),[v,W(f)]):void 0):v)):!r&&n}function m(n,t){var r=s?h:w-h,i=0;return n<-r?i|=1:r<n&&(i|=2),t<-r?i|=4:r<t&&(i|=8),i}return nt(d,function(o){var u,a,l,f,c;return{lineStart:function(){f=l=!1,c=1},point:function(n,t){var r,i=[n,t],e=d(n,t),n=s?e?0:m(n,t):e?m(n+(n<0?w:-w),t):0;!u&&(f=l=e)&&o.lineStart(),e!==l&&(r=y(u,i),an(u,r)||an(i,r))&&(i[0]+=A,i[1]+=A,e=d(i[0],i[1])),e!==l?(c=0,e?(o.lineStart(),r=y(i,u),o.point(r[0],r[1])):(r=y(u,i),o.point(r[0],r[1]),o.lineEnd()),u=r):p&&u&&s^e&&(n&a||!(t=y(i,u,!0))||(c=0,s?(o.lineStart(),o.point(t[0][0],t[0][1]),o.point(t[1][0],t[1][1]),o.lineEnd()):(o.point(t[1][0],t[1][1]),o.lineEnd(),o.lineStart(),o.point(t[0][0],t[0][1])))),!e||u&&an(u,i)||o.point(i[0],i[1]),u=i,l=e,a=n},lineEnd:function(){l&&o.lineEnd(),u=null},clean:function(){return c|(f&&l)<<1}}},function(n,t,r,i){var e=i,i=h,o=v,u=r,r=n,a=t;if(o){var l=P(i),f=j(i),c=u*o;null==r?(r=i+u*q,a=i-c/2):(r=on(l,r),a=on(l,a),(0<u?r<a:a<r)&&(r+=u*q));for(var s,p=r;0<u?a<p:p<a;p-=c)s=W([l,-f*P(p),-f*j(p)]),e.point(s[0],s[1])}},s?[0,-h]:[-w,h-w])}function ot(i){return function(n){var t,r=new ut;for(t in i)r[t]=i[t];return r.stream=n,r}}function ut(){}function at(n,t,r){var i=t[1][0]-t[0][0],e=t[1][1]-t[0][1],o=n.clipExtent&&n.clipExtent(),r=(n.scale(150).translate([0,0]),null!=o&&n.clipExtent(null),a(r,n.stream(Pn)),Pn.result()),u=Math.min(i/(r[1][0]-r[0][0]),e/(r[1][1]-r[0][1])),i=+t[0][0]+(i-u*(r[1][0]+r[0][0]))/2,t=+t[0][1]+(e-u*(r[1][1]+r[0][1]))/2;return null!=o&&n.clipExtent(o),n.scale(150*u).translate([i,t])}ut.prototype={constructor:ut,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var lt=16,ft=P(30*O);function ct(n,t){return+t?(P=n,j=t,function(i){var r,e,o,u,a,l,f,c,s,p,h,v,g={point:n,lineStart:t,lineEnd:y,polygonStart:function(){i.polygonStart(),g.lineStart=m},polygonEnd:function(){i.polygonEnd(),g.lineStart=t}};function n(n,t){n=P(n,t),i.point(n[0],n[1])}function t(){c=NaN,g.point=d,i.lineStart()}function d(n,t){var r=G([n,t]),t=P(n,t);k(c,s,f,p,h,v,c=t[0],s=t[1],f=n,p=r[0],h=r[1],v=r[2],lt,i),i.point(c,s)}function y(){g.point=n,i.lineEnd()}function m(){t(),g.point=S,g.lineEnd=E}function S(n,t){d(r=n,t),e=c,o=s,u=p,a=h,l=v,g.point=d}function E(){k(c,s,f,p,h,v,e,o,r,u,a,l,lt,i),g.lineEnd=y,y()}return g}):(r=n,ot({point:function(n,t){n=r(n,t),this.stream.point(n[0],n[1])}}));var r,P,j;function k(n,t,r,i,e,o,u,a,l,f,c,s,p,h){var v,g,d,y,m,S,E,M,_,x,N=u-n,b=a-t,w=N*N+b*b;4*j<w&&p--&&(d=o+s,E=R(d/=y=L((v=i+f)*v+(g=e+c)*g+d*d)),m=z(z(d)-1)<A||z(r-l)<A?(r+l)/2:C(g,v),S=(E=P(m,E))[0],j<(x=b*(M=S-n)-N*(_=(E=E[1])-t))*x/w||.3<z((N*M+b*_)/w-.5)||i*f+e*c+o*s<ft)&&(k(n,t,r,i,e,o,S,E,m,v/=y,g/=y,d,p,h),h.point(S,E),k(S,E,m,v,g,d,u,a,l,f,c,s,p,h))}}var st=ot({point:function(n,t){this.stream.point(n*O,t*O)}});function pt(n){var i,e,o,u,a,t,r,l,f,c,s=150,p=480,h=250,v=0,g=0,d=0,y=0,m=0,S=null,E=it,M=null,_=vn,x=.5,N=ct(P,x);function b(n){return[(n=a(n[0]*O,n[1]*O))[0]*s+e,o-n[1]*s]}function w(n){return(n=a.invert((n[0]-e)/s,(o-n[1])/s))&&[n[0]*F,n[1]*F]}function P(n,t){return[(n=i(n,t))[0]*s+e,o-n[1]*s]}function j(){a=$((r=d,n=y,t=m,u=(r%=q)?n||t?$(rn(r),en(n,t)):rn(r):n||t?en(n,t):nn),i);var n,t,r=i(v,g);return e=p-r[0]*s,o=h+r[1]*s,k()}function k(){return f=c=null,b}return b.stream=function(n){return f&&c===n?f:f=st(E(u,N(_(c=n))))},b.clipAngle=function(n){return arguments.length?(E=+n?et(S=n*O,6*O):(S=null,it),k()):S*F},b.clipExtent=function(n){return arguments.length?(_=null==n?(M=t=r=l=null,vn):pn(M=+n[0][0],t=+n[0][1],r=+n[1][0],l=+n[1][1]),k()):null==M?null:[[M,t],[r,l]]},b.scale=function(n){return arguments.length?(s=+n,j()):s},b.translate=function(n){return arguments.length?(p=+n[0],h=+n[1],j()):[p,h]},b.center=function(n){return arguments.length?(v=n[0]%360*O,g=n[1]%360*O,j()):[v*F,g*F]},b.rotate=function(n){return arguments.length?(d=n[0]%360*O,y=n[1]%360*O,m=2<n.length?n[2]%360*O:0,j()):[d*F,y*F,m*F]},b.precision=function(n){return arguments.length?(N=ct(P,x=n*n),k()):L(x)},b.fitExtent=function(n,t){return at(b,n,t)},b.fitSize=function(n,t){return at(b,[[0,0],n],t)},function(){return i=n.apply(this,arguments),b.invert=i.invert&&w,j()}}function ht(n,t){var r,i,e,o=j(n),u=(o+j(t))/2;return z(u)<A?(r=P(n),a.invert=function(n,t){return[n/r,R(t*r)]},a):(e=L(i=1+o*(2*u-o))/u,l.invert=function(n,t){t=e-t;return[C(n,z(t))/u*J(t),R((i-(n*n+t*t)*u*u)/(2*u))]},l);function a(n,t){return[n*r,j(t)/r]}function l(n,t){t=L(i-2*u*j(t))/u;return[t*j(n*=u),e-t*P(n)]}}function vt(){return t=0,r=w/3,(n=(i=pt(n=ht))(t,r)).parallels=function(n){return arguments.length?i(t=n[0]*O,r=n[1]*O):[t*F,r*F]},n.scale(155.424).center([0,33.6442]);var n,t,r,i}function gt(n){return n}function dt(n,t){var h,v,r=t.id,i=t.bbox,e=null==t.properties?{}:t.properties,n=(h=(n=>{var o,u,a,l,f,c;return null==n?gt:(a=n.scale[0],l=n.scale[1],f=n.translate[0],c=n.translate[1],function(n,t){t||(o=u=0);var r=2,i=n.length,e=new Array(i);for(e[0]=(o+=n[0])*a+f,e[1]=(u+=n[1])*l+c;r<i;)e[r]=n[r],++r;return e})})(n.transform),v=n.arcs,function n(t){var r,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(n)};case"Point":r=o(t.coordinates);break;case"MultiPoint":r=t.coordinates.map(o);break;case"LineString":r=u(t.arcs);break;case"MultiLineString":r=t.arcs.map(u);break;case"Polygon":r=l(t.arcs);break;case"MultiPolygon":r=t.arcs.map(l);break;default:return null}return{type:i,coordinates:r}}(t));function o(n){return h(n)}function u(n){for(var t=[],r=0,i=n.length;r<i;++r){p=s=f=c=l=a=u=o=e=void 0;var e=n[r],o=t;o.length&&o.pop();for(var u=v[e<0?~e:e],a=0,l=u.length;a<l;++a)o.push(h(u[a],a));if(e<0)for(var f,c=o,e=l,s=c.length,p=s-e;p<--s;)f=c[p],c[p++]=c[s],c[s]=f}return t.length<2&&t.push(t[0]),t}function a(n){for(var t=u(n);t.length<4;)t.push(t[0]);return t}function l(n){return n.map(a)}return null==r&&null==i?{type:"Feature",properties:e,geometry:n}:null==i?{type:"Feature",id:r,properties:e,geometry:n}:{type:"Feature",id:r,bbox:i,properties:e,geometry:n}}var yt;(function(n){function o(n,t,r){return n instanceof Array?(n.push(r),n[n.length-1]):n instanceof Object?(n[t]=r,n[t]):void 0}n.exports=function(n){var t=n instanceof Array?[]:{};return function n(t,r){for(var i in t){var e=t[i];e instanceof Array?n(e,o(r,i,[])):e instanceof Object&&"function"!=typeof e?n(e,o(r,i,{})):o(r,i,e)}}(n,t),t}})(yt={exports:{}});_.cartogram=function(){var G=8,I=vt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),T=function(n){return{}},Z=function(n){return 1};function r(t,n){t=B(t);for(var r,i,e,o=D(t.transform),u=t.arcs.length,a=0,l=new Array(u);a<u;){for(m=t.arcs[a].length,S=i=r=0,e=new Array(m);S<m;)t.arcs[a][S][0]=r+=t.arcs[a][S][0],t.arcs[a][S][1]=i+=t.arcs[a][S][1],e[S]=null===I?o(t.arcs[a][S]):I(o(t.arcs[a][S])),S++;l[a++]=e}var h,f,c=$n().projection(null),s=(h=l,f={LineString:p,MultiLineString:v,Polygon:v,MultiPolygon:function(n){return n.map(v)}},("GeometryCollection"===(n={type:"GeometryCollection",geometries:n}).type?((n=Object.create(n)).geometries=n.geometries.map(g),n):g(n)).geometries.map(function(n){return{type:"Feature",id:n.id,properties:T.call(null,n,t),geometry:n}}));function p(n){for(var t=[],r=0,i=n.length;r<i;++r){p=s=f=c=l=a=u=o=e=void 0;var e=n[r],o=t;o.length&&o.pop();for(var u=h[e<0?~e:e],a=0,l=u.length;a<l;++a)o.push(u[a]);if(e<0)for(var f,c=o,e=l,s=c.length,p=s-e;p<--s;)f=c[p],c[p++]=c[s],c[s]=f}return t}function v(n){return n.map(p)}function g(n){return(n=Object.create(n)).coordinates=f[n.type](n.arcs),n}var d=s.map(Z),y=H(d);if(G<=0)return s;for(var L=0;L++<G;){for(var m,S,E,M,_,x,N,b,w,P,j,k,A=s.map(c.area),R=H(A),q=0,F=0,O=s.map(function(n,t){var r=Math.abs(A[t]),t=+d[t],i=R*t/y,e=Math.sqrt(r/Math.PI),o=Math.sqrt(i/Math.PI)-e,u=Math.max(r,i)/Math.min(r,i);return q+=u,F++,{id:n.id,area:r,centroid:c.centroid(n),value:t,desired:i,radius:e,mass:o,sizeError:u}}),z=q/F,C=1/(1+z),u=l.length,a=0;a<u;){for(m=l[a].length,S=0;S<m;){for(E=[0,0],M=O.length,_=0;_<M;)w=O[_].centroid,k=O[_].mass,N=(x=O[_].radius)*x,b=l[a][S][0]-w[0],w=l[a][S][1]-w[1],P=b*b+w*w,j=Math.sqrt(P),E[0]+=(k=x<j?k*x/j:k*(P/N)*(4-3*j/x))*(P=w,0===(N=b)?0:(P=P/N,0<N?1/Math.sqrt(1+P*P):-1/Math.sqrt(1+P*P))),E[1]+=k*(j=w,0===(x=b)?1:(j=j/x,0<x?j/Math.sqrt(1+j*j):-j/Math.sqrt(1+j*j))),_++;l[a][S][0]+=E[0]*C,l[a][S][1]+=E[1]*C,S++}a++}if(z<=1)break}return{features:s,arcs:l}}function B(n){{if(n instanceof Array)return n.map(B);if("string"==typeof n||"number"==typeof n)return n;var t=n,r,i={};for(r in t)i[r]=B(t[r]);return i}}function t(n){return function(){return n}}r.path=$n().projection(null),r.iterations=function(n){return arguments.length?(G=n,r):G},r.value=function(n){return arguments.length?(Z="function"==typeof n?n:t(n),r):Z},r.projection=function(n){return arguments.length?(I=n,r):I},r.feature=function(n,t){return{type:"Feature",id:t.id,properties:T.call(null,t,n),geometry:{type:t.type,coordinates:(r=n,("GeometryCollection"===(n=t).type?{type:"FeatureCollection",features:n.geometries.map(function(n){return dt(r,n)})}:dt(r,n)).geometry.coordinates)}};var r},r.features=function(t,n){return n.map(function(n){return r.feature(t,n)})},r.properties=function(n){return arguments.length?(T="function"==typeof n?n:t(n),r):T};var D=r.transformer=function(n){var t=n.scale[0],r=n.scale[1],i=n.translate[0],e=n.translate[1];function o(n){return[n[0]*t+i,n[1]*r+e]}return o.invert=function(n){return[(n[0]-i)/t,(n[1]-e)/r]},o};return r},Object.defineProperty(_,"__esModule",{value:!0})});